'use strict'

// HTML структура для примера
// Имеется HTML-документ с элементом body.
// Внутри body находится div с текстом и параграфом.
// В параграфе содержится текст и кнопка "Generate".
// Процесс обработки события нажатия
// Событие нажатия (клика) проходит через несколько фаз:
//
// Фаза захвата (capturing phase): событие начинается от корня документа и двигается вниз к целевому элементу, проходя через все элементы на своем пути.
// Процесс идет от document до самого вложенного элемента.
// Событие последовательно проходит через все родительские элементы до цели.
// Целевая фаза: событие достигает целевого элемента, с которым было совершено взаимодействие.
// Событие обрабатывается непосредственно на целевом элементе.
// Фаза всплытия (bubbling phase): после обработки на целевом элементе, событие всплывает обратно к корню документа, информируя всех родительские элементы о совершенном действии.
// Событие последовательно проходит вверх по иерархии элементов.
// Важные замечания
// Обработчики событий по умолчанию реагируют на фазу всплытия.
// Событие будет сгенерировано независимо от наличия обработчиков.
// События можно останавливать или обрабатывать на разных этапах их прохождения.

const button = document.querySelector('.button')

// button.addEventListener('click', (event) => {
//   console.log('Event 2')
// })

// Document
// Html
// Body
// Div
// P
// Button

const inner = document.querySelector('.inner')
const wrapper = document.querySelector('.wrapper')

const eventHandler = (event) => {
  console.log('Event 1')
}
button.addEventListener('mouseover', eventHandler,)
button.addEventListener('click', function (event) {

  console.log('button')
  console.log(event.target)
  console.log(event.currentTarget)

  this.style.backgroundColor = 'lightblue'
})

inner.addEventListener('click', function (event) {

  console.log('inner')
  console.log(event.target)
  console.log(event.currentTarget)
  event.stopPropagation()
  this.style.backgroundColor = 'lightgreen'
})

wrapper.addEventListener('click', function (event) {

  console.log('wrapper')
  console.log(event.target)
  console.log(event.currentTarget)
  this.style.backgroundColor = 'pink'
}, true)

// Основные понятия:
//
// Всплытие событий: Процесс, при котором событие, начавшееся на одном элементе, последовательно передается вверх по иерархии DOM-дерева.
// Event Listener: Функция, добавляемая на элемент для отслеживания событий (например, кликов).
// Практический пример:
//
// Создание элементов: На странице создаем два вложенных div (wrapper и inner) и кнопку.
// Стилизация: Задаем базовые стили для элементов, чтобы отличать их визуально.
// Добавление обработчиков событий: На каждый элемент добавляем свой обработчик, который при активации изменяет цвет фона элемента.
// Наблюдения:
//
// Проверка всплытия: Кликая на кнопку, мы наблюдаем последовательное изменение цвета всех элементов от кнопки до внешнего div. Это демонстрация механизма всплытия.
// Event and Target: Несмотря на то, что визуальное изменение кажется одновременным, событие обрабатывается последовательно от внутреннего элемента к внешнему. В консоли можно увидеть, что event.target всегда остается один и тот же (элемент, на который изначально был совершен клик).
// Как управлять всплытием событий:
//
// Остановка всплытия: Используя event.stopPropagation(), можно прекратить передачу события дальше по иерархии.
// Фаза захвата: Добавив третий параметр true при установке слушателя, мы можем перехватывать события на этапе погружения, до их достижения целевого элемента.
