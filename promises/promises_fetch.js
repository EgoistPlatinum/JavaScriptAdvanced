'use strict'

//Введение в Promise
// Проблема: При работе с несколькими асинхронными запросами появляется сложность в управлении этими операциями, известная как "ад callback".
// Решение: Введение в ES6 (ECMAScript 2015) Promise позволяет элегантно управлять асинхронными операциями, избегая сложной вложенности callback.
// Что такое Promise?
// Определение: Promise - это объект, представляющий собой конечный результат асинхронной операции. Promise может находиться в одном из трех состояний:
// pending (в ожидании) — начальное состояние, промис ещё не выполнен.
// fulfilled (выполнено успешно) — асинхронная операция завершилась успешно, промис возвращает результат.
// rejected (выполнено с ошибкой) — произошла ошибка в процессе выполнения асинхронной операции.
// Работа с промисами
// Обработка результата: Для работы с результатом Promise используют методы .then() для успешного исхода и .catch() для обработки ошибки.
// Синтаксический сахар: async/await упрощает работу с Promise, делая асинхронный код более похожим на синхронный и читаемый.
// Пример с Fetch API
// Демонстрация: Создание Fetch запроса возвращает Promise. В качестве примера, запрос продукта с использованием Fetch API демонстрирует, как Promise изначально находится в состоянии pending, а затем переходит в состояние fulfilled при успешном получении данных.
// Интерпретация результата: Просмотр результата в консоли показывает изменение состояния Promise и содержимое ответа, демонстрируя, что Promise успешно обработал асинхронный запрос.

const res = fetch('https://dummyjson.com/products/1')
  .then(response => response.json())
  .then(data => console.log(data))

console.log(res)

// Ключевые понятия:
// Promise: Объект, представляющий окончательное завершение (или провал) асинхронной операции.
// Состояния Promise:
// Fulfilled - успешное выполнение;
// Rejected - операция завершилась с ошибкой.
// Методы работы с Promise:
// then() - обработка успешного завершения;
// catch() - перехват ошибок;
// finally() - выполняется всегда, независимо от результата.
// Процесс работы с Promise:
// Использование fetch для асинхронного запроса:
// Пример: fetch(url) - асинхронный запрос по указанному URL.
// Метод get используется по умолчанию.
// Получение и обработка ответа:
// Конвертация ответа в JSON:
// response.json() конвертирует ответ сервера из формата JSON.
// Возвращает новый Promise с результатом в формате JSON.
// Использование then для обработки результата:
// Первый then преобразует ответ в JSON.
// Второй then получает и обрабатывает уже преобразованные данные.
// Упрощение записи:
// С помощью стрелочных функций и неявного возврата можно упростить код.
// Примеры:
// Базовый код запроса и обработки ответа:```javascript fetch(url) .then(response => response.json()) .then(data => console.log(data)) .catch(error => console.error('Error:', error));
// Важные замечания:
// Обработка ошибок: Важно использовать метод catch для перехвата и обработки возможных ошибок.
// Асинхронность: Код выполняется асинхронно, из-за чего важно понимать, что операции не блокируют выполнение последующего кода.
